# Scrabble Game

## Files architecture:

3 directories:
- data: used to store our dictionary file and letter distribution file.
- src: scrabble libraries
- test: 2 tests file to run our scrabble libraries

_src_ directory contains:
- scrabble_lib.py: Scrabble Anagramer
- scrabble_game.py: Scrabble game master. Player and Game classes. Store scores and handle player moves.

_test_ directory countains:
- scrabble_test.py: Test the anagramer
- scrabble_game_test.py: Test the game master

As the scrabble libraries (in _src_) are not installed in python/site-packages, we can only run our test from the test directory or its parent directory.


## Implementation

### Anagramer

To store our dictionary (authorised words for the game), we use a dict data structure.

As the maximum length for a word in our game is 7 (defined in scrabble_lib.py). We will not store words longer that this number.
Same for the minimum length of 2.

In order to speed up the access to the list of matching words given a set of letters, we will dispatch the words by their length.

```
word_map: {len(word): [words]}
```

After triaging the words by their length, we need something to say if a set of letters can match an existing word.
Another dictionary could be the solution for an O(1) access (check).
Unfortunately using a set (or a multiset, authorising multiple occurence of a letter) as the key of that dictionary is not possible as a Python set or a multiset is not hashable.

As a solution we will use a string as a key. It will be generated by sorting alphabeticaly the letters of the word + uppercase and removing the accents.

```
word_map: {len(word): {letters_used: [words]}}
```

As returning a word using all the letters of the set will maximise the points anyway, we can check into the word_map if we have a match:
- Size of set => Entry key into our word_map dict
- Sort letters alphabeticaly => Key for second dictionary

If we do not not have any entries. We can start to check the permutations by removing letter by letter.

However a word with less letters can worth more points than another word with more letters.
We will get all the possible words given a set of letters and return the one which maximise the points.


### Game master

2 classes:
- Player: state of a player (name, letters in hand and points)
- Game: state of the game (dictionary, all letter tiles, players, player_turn)


#### Gameplay

- Each player pick 1 tile (pick another if blank tile), the closest to 'A' starts.
- Each player pick 7 tiles, they are removed from the game's letters set.
- Start game loop:
  - Use anagramer to get best word.
  - Pick tiles until having 7 tiles in hand.
  - If a player cannot play, he can "swap" his hand (draw 7 tiles, return his 7 old tiles)
  - Add points to player's state.
- End game when no more tiles to draw and players cannot play


#### Log file

Log file will be saved in current dir in a file named after the current datetime: "game_YYYY_MM_DD_hh_mm_ss.log".
If we do not have the permission to write into that file, print on stdout.
